import{a as i,b as v,c as G,d as U}from"/build/_shared/chunk-L6QWH6BF.js";import{c as x,e as f,k as N,l as h,m as g}from"/build/_shared/chunk-V5M25JL4.js";import{a as p,c as y,g as w,j as I,k as S}from"/build/_shared/chunk-SNPRDTKD.js";import{b as M,d as o,f as j,g as b}from"/build/_shared/chunk-B7AP56NU.js";var E=M((z,C)=>{C.exports={}});var D=o(U());var H=o(E());var d=o(j());G();var e=o(b());function O({error:t}){return console.error(t),(0,e.jsx)("div",{className:"py-6",children:(0,e.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:["An unexpected error occurred: ",t.message]})})}function _(){let t=f();if(t.status===404)return(0,e.jsx)("div",{className:"py-6",children:(0,e.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:"Chapter not found"})});throw new Error(`Unexpected caught response with status: ${t.status}`)}var X=({state:t})=>{let n="Instance is running",a=!0;if(["running","exited"].includes(t))t==="exited"&&(n="Instance is stopped",a=!1);else return null;return(0,e.jsx)("div",{className:i(a?"border-green-800":"border-red-800","border-2 p-4"),children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-0",children:(0,e.jsx)(v,{isRunning:a})}),(0,e.jsx)("div",{className:"flex-1 text-center",children:(0,e.jsx)("h3",{className:i(a?"text-green-500":"text-red-500","text-sm font-medium uppercase"),children:n})})]})})},q=({state:t,chapterId:n,isUpdating:a,ports:r,location:c})=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h2",{className:"sr-only",children:"Details"}),(0,e.jsx)("div",{className:"mt-2",children:(0,e.jsx)(X,{state:t})}),(0,e.jsx)("div",{className:"mt-6 border-t border-green-900 pt-6 pb-6 xl:pb-0",children:(0,e.jsxs)(N,{method:"post",className:"flex justify-center",children:[(0,e.jsx)("input",{type:"hidden",name:"chapterId",value:n}),(0,e.jsxs)("button",{type:"submit",name:"action",value:t==="running"?"stop":"start",disabled:a,className:i(t==="running"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-green-600 hover:bg-green-700 focus:ring-green-500",a?"cursor-not-allowed opacity-50":"","inline-flex items-center rounded-md border border-transparent px-4 py-2 text-sm font-medium uppercase text-white shadow-sm  focus:outline-none focus:ring-2  focus:ring-offset-2"),children:[(0,e.jsx)(p,{icon:a?y:t==="running"?I:S,className:i(a?"animate-spin-slow":"","-ml-1 mr-2 h-5 w-5"),"aria-hidden":"true"}),t==="running"?`Stop${a?"ping":""}`:`Start${a?"ing":""}`," ","instance"]})]})}),Object.keys(r).length?(0,e.jsxs)("fieldset",{className:"fieldset-thin mb-6 xl:mt-6 xl:mb-0",children:[(0,e.jsx)("legend",{className:"legend",children:"Open ports"}),(0,e.jsx)("ul",{children:Object.keys(r).map(s=>r[s][0].HostPort).map(s=>(0,e.jsx)("li",{className:"my-2",children:(0,e.jsxs)("a",{href:`${c}:${s}`,target:"_blank",rel:"noreferrer",className:"m-3 flex cursor-pointer items-center bg-green-600 p-2 uppercase text-black hover:bg-green-700",children:[(0,e.jsxs)("span",{className:"flex-1",children:[c.substring(2),":",s]}),(0,e.jsx)(p,{icon:w,className:"h-4"})]})},s))})]}):null]}),k=()=>(0,e.jsx)("div",{children:"This chapter doesn't need a container"});function A(){let[t,n]=(0,d.useState)(""),a=x(),r=h(),c=g(),s=Boolean(c.submission),T=a.chapterId,{title:F,subTitle:R,description:m,containerState:$,ports:P,hasContainer:l}=r;(0,d.useEffect)(()=>{n(`//${window.location.hostname}`)},[]);let u=(0,e.jsx)(q,{state:$.Status,isUpdating:s,ports:P,chapterId:T,location:t});return(0,e.jsx)("main",{className:"flex-1",children:(0,e.jsx)("div",{className:"py-8 xl:py-10",children:(0,e.jsxs)("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 xl:grid xl:max-w-6xl xl:grid-cols-3",children:[(0,e.jsx)("div",{className:"xl:col-span-2 ",children:(0,e.jsxs)("fieldset",{className:"fieldset-single p-4",children:[(0,e.jsx)("legend",{className:"legend",children:"Info"}),(0,e.jsx)("div",{className:"border-green-900 md:flex md:items-center md:justify-between md:space-x-4 xl:border-b xl:pb-6",children:(0,e.jsxs)("div",{className:"w-full space-y-2",children:[(0,e.jsx)("h2",{className:"border border-orange-400 p-1 text-center text-xs font-bold uppercase text-orange-400",children:R}),(0,e.jsx)("h1",{className:" bg-yellow-400 p-1 text-center text-2xl font-bold text-black",children:F})]})}),(0,e.jsxs)("aside",{className:"mt-8 border-b border-green-900 xl:hidden",children:[l&&u,!l&&(0,e.jsx)("div",{className:"pb-8 text-center",children:(0,e.jsx)(k,{})})]}),(0,e.jsxs)("div",{className:"py-3 xl:pt-6 xl:pb-0",children:[(0,e.jsx)("h2",{className:"sr-only",children:"Description"}),(0,e.jsx)("div",{className:"prose max-w-none space-y-3",children:m==null?void 0:m.split(`
`).map((L,B)=>(0,e.jsx)("p",{children:L},B))})]})]})}),(0,e.jsx)("aside",{className:"hidden xl:block xl:pl-8",children:(0,e.jsxs)("fieldset",{className:"fieldset-single px-4 pb-4",children:[(0,e.jsx)("legend",{className:"legend",children:"Details"}),l&&u,!l&&(0,e.jsx)("div",{className:"mt-3 text-center",children:(0,e.jsx)(k,{})})]})})]})})})}export{_ as CatchBoundary,O as ErrorBoundary,A as default};
